apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - deployment.yaml
  - service.yaml
  - ingress.yaml
  - configmap.yaml
  - configmap-dbconfig.yaml
  - mysql-pvc.yaml
  - mysql-deployment.yaml
  # secret.yaml 不纳入 GitOps（密钥不落地），通过 kubectl create secret 管理
  - hpa.yaml
  - networkpolicy.yaml
  - post-sync-hook.yaml
  # servicemonitor.yaml 需要 Prometheus Operator CRD，未安装时注释掉
  # - servicemonitor.yaml
  # rollout.yaml 需要 Argo Rollouts Controller，启用时替换 deployment.yaml
  # - rollout.yaml
  # sealed-secret.yaml 需要 Sealed Secrets Controller，启用时替换 secret.yaml
  # - sealed-secret.yaml

commonLabels:
  app.kubernetes.io/name: angelpay
  app.kubernetes.io/managed-by: kustomize
